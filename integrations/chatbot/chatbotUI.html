<!-- Floating Action Button (Bootstrap offcanvas) -->
<button class="btn btn-warning rounded-circle position-fixed d-flex align-items-center justify-content-center"
    id="chatbotBtn" type="button" data-bs-toggle="offcanvas" data-bs-target="#chatbotOffcanvas"
    aria-controls="chatbotOffcanvas" style="width:64px;height:64px;bottom:24px;right:24px;z-index:1080;">
    <img src="/HOTEL-MANAGEMENT-SYSTEM/images/ollamaPNG.png" alt="Chat" style="width:70%;height:70%;object-fit:contain;">
</button>

<!-- Chatbot Offcanvas (slides in from right) -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="chatbotOffcanvas" aria-labelledby="chatbotOffcanvasLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="chatbotOffcanvasLabel"><i class="bi bi-robot me-2"></i>Assistant</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body d-flex p-0" style="min-width:320px;max-width:420px;">
        <iframe src="/HOTEL-MANAGEMENT-SYSTEM/integrations/chatbot.php" style="width:100%;height:100%;border:0;min-height:560px;"
            title="Chatbot"></iframe>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const btn = document.getElementById('chatbotBtn');
        const offcanvasEl = document.getElementById('chatbotOffcanvas');
        if (!btn || !offcanvasEl) return;

        offcanvasEl.addEventListener('show.bs.offcanvas', function () {
            btn.classList.add('d-none');
        });
        offcanvasEl.addEventListener('hidden.bs.offcanvas', function () {
            btn.classList.remove('d-none');
        });

        // fallback: hide the button on click (in case events are not available)
        btn.addEventListener('click', function () {
            btn.classList.add('d-none');
        });
    });
</script>